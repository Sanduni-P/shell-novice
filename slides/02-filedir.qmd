
# Episode 2: Navigating Files and Directories

::: {.callout-tip icon="false" .nonincremental}
## Questions

- How can I move around on my computer?
- How can I see what files and directories I have?
- How can I specify the location of a file or directory on my computer?
:::

::: {.callout-tip icon="false" .nonincremental}
## Objectives

- Explain the similarities and differences between a file and a directory.
- Translate an absolute path into a relative path and vice versa.
- Construct absolute and relative paths that identify specific files and directories.
- Use options and arguments to change the behaviour of a shell command.
- Demonstrate the use of tab completion and explain its advantages.
:::

## The File System

::: {style="text-align: center;"}
**Files** = store information

**Directories** (folders) = store files or other directories
:::

## The File System Tree

```
/ (root)
├── bin
├── data
├── Users
│   └── nelle
├── tmp
└── ...
```

The **root directory** is `/` - everything else is inside it.

![](../episodes/fig/filesystem.svg){alt="Nelle's file system tree showing root and sub-directories" fig-align="center" height=250}

## What these folders mean

- `bin` = built-in programs and commands
- `data` = miscellaneous data files
- `Users` = user home directories (e.g., `/Users/nelle`)
- `tmp` = temporary files that don't need long-term storage

## `pwd` - Print Working Directory

**Where are you right now?**

```bash
$ pwd
```

```output
/Users/nelle
```

This shows your **current working directory** (your current location).


## Your Home Directory

The shell usually starts in your **home directory**:

- **macOS**: `/Users/username`
- **Linux**: `/home/username`
- **Windows**: `C:\Users\username`

## `ls` - List Files and Directories

**What's in your current location?**

```bash
$ ls
```

```output
Applications  Documents    Library      Music        Public
Desktop      Downloads    Movies       Pictures
```

## Making `ls` Output Clearer

Use the `-F` flag to mark file types:

```bash
$ ls -F
```

```output
Applications/  Documents/    Library/      Music/        Public/
Desktop/       Downloads/    Movies/       Pictures/
```

::: {.callout-note}
- `/` after name = **directory**
- `*` after name = **executable file**
- `@` after name = **symbolic link** 
- No marker = **regular file**
:::

## Clearing Your Terminal

If your screen gets cluttered:

```bash
clear -x
```

You can still access previous commands using <kbd>↑</kbd>
and <kbd>↓</kbd> to move line-by-line, or by scrolling in your terminal after `clear -x`.

For some Bash configurations, `clear` may also clear the scrollbuffer

::: {.callout-tip}

**Shortcut:** Press <kbd>Ctrl</kbd>+<kbd>L</kbd> to clear the screen.

:::

## Getting Help {.nonincremental}

There are two common ways to learn command options:


1. `--help` (Linux and Git Bash)

```bash
ls --help
```

2. `man` (Linux and macOS)

```bash
man ls
```

Press <kbd>q</kbd> to quit the manual.

::: {.callout-tip}
**Built-in commands:** If `man cd` fails, try `help cd` instead.
:::

## The `--help` Option

`--help` option displays more
information on how to use the command or program.

```bash
ls --help
```

```output
Usage: ls [OPTION]... [FILE]...
List information about the FILEs (the current directory by default).
Sort entries alphabetically if neither -cftuvSUX nor --sort is specified.

Mandatory arguments to long options are mandatory for short options, too.
  -a, --all                  do not ignore entries starting with .
  -A, --almost-all           do not list implied . and ..
      --author               with -l, print the author of each file
  -b, --escape               print C-style escapes for nongraphic characters
      --block-size=SIZE      scale sizes by SIZE before printing them; e.g.,
                               '--block-size=M' prints sizes in units of
                               1,048,576 bytes; see SIZE format below
  -B, --ignore-backups       do not list implied entries ending with ~
  -c                         with -lt: sort by, and show, ctime (time of last
                               modification of file status information);
                               with -l: show ctime and sort by name;
                               otherwise: sort by ctime, newest first
  -C                         list entries by columns
      --color[=WHEN]         colorize the output; WHEN can be 'always' (default
                               if omitted), 'auto', or 'never'; more info below
  -d, --directory            list directories themselves, not their contents
  -D, --dired                generate output designed for Emacs' dired mode
  -f                         do not sort, enable -aU, disable -ls --color
  -F, --classify             append indicator (one of */=>@|) to entries
...        ...        ...
```

## Short vs Long Options

Use **short options** when typing commands into the shell to minimize keystrokes and get your task done faster:

```bash
ls -F
```

Use **long options** in scripts for clarity:

```bash
ls --classify
```


## Unsupported Command Options

If you use an option the command doesn't support, you'll see an error:

```bash
ls -j
```

```error
ls: invalid option -- 'j'
Try 'ls --help' for more information.
```

## The `man` command

This command will turn your terminal into a page with a description
of the `ls` command and its options.

```bash
man ls
```

To navigate through the `man` pages,

- use <kbd>↑</kbd> and <kbd>↓</kbd> to move line-by-line
- try <kbd>b</kbd> and <kbd>Spacebar</kbd> to skip up and down by a full page.
- use <kbd>/</kbd> followed by the character or word you are searching for to find it in the manual.
- Sometimes a search will result in multiple hits. If so, you can move between hits using <kbd>N</kbd> (for moving forward) and
<kbd>Shift</kbd>\+<kbd>N</kbd> (for moving backward).
- press <kbd>q</kbd> to quit the manual and return to the command prompt.

## Manual pages on the web

- Thea third way to access help for commands is to search for the manual page on the web. 
- When using internet search, including the phrase `unix man page` in your search
query will help to find relevant results.

## Challenge

::: {.callout-note .challenge-callout icon="false" style="border-left: 4px solid #ffc107;"}

## Exploring More `ls` Options

You can also use two options at the same time. What does the command `ls` do when used
with the `-l` option? What about if you use both the `-l` and the `-h` option?

Some of its output is about properties that we do not cover in this lesson (such
as file permissions and ownership), but the rest should be useful
nevertheless.

:::

## Solution


::: {.callout-tip .solution-callout collapse="true" icon="false" style="border-left: 4px solid #ffc107;"}

## Solution

The `-l` option makes `ls` use a **l**ong listing format, showing not only
the file/directory names but also additional information, such as the file size
and the time of its last modification. If you use both the `-h` option and the `-l` option,
this makes the file size '**h**uman readable', i.e. displaying something like `5.3K`
instead of `5369`.


:::

## Challenge

::: {.callout-note .challenge-callout icon="false" style="border-left: 4px solid #ffc107;"}

## Listing in Reverse Chronological Order

By default, `ls` lists the contents of a directory in alphabetical
order by name. The command `ls -t` lists items by time of last
change instead of alphabetically. The command `ls -r` lists the
contents of a directory in reverse order.
Which file is displayed last when you combine the `-t` and `-r` options?
Hint: You may need to use the `-l` option to see the
last changed dates.

:::

## Solution

::: {.callout-tip .solution-callout collapse="true" icon="false" style="border-left: 4px solid #ffc107;"}

## Solution

The most recently changed file is listed last when using `-rt`. This
can be very useful for finding your most recent edits or checking to
see if a new output file was written.


:::

## Exploring Other Directories

List contents of the Desktop directory:

```bash
$ ls -F Desktop
```

```output
shell-lesson-data/
```

Note that if a directory named `Desktop` does not exist in your current working directory,
this command will return an error.


## `cd` - Change Directory

**Move to a different location**

```bash
$ cd Desktop
$ pwd
```

```output
/Users/nelle/Desktop
```

Notice: `cd` produces no output, but `pwd` confirms you moved!

## Moving Into Subdirectories

Go deeper into the file structure:

```bash
$ cd Desktop/shell-lesson-data
$ cd exercise-data
$ pwd
```

```output
/Users/nelle/Desktop/shell-lesson-data/exercise-data
```

## Listing Current Directory

Check what's here:

```bash
$ ls -F
```

```output
alkanes/  animal-counts/  creatures/  numbers.txt  writing/
```

## Moving Up One Level: `..`

To go to the **parent directory** (one level up):

```bash
$ cd ..
$ pwd
```

```output
/Users/nelle/Desktop/shell-lesson-data
```

`..` = "the directory containing this one"

## Current Directory: `.`

To refer to the **current directory**:

```bash
$ ls -F .
```

This lists the current directory (same as just `ls -F`).

## Special Symbols in Paths

| Symbol | Meaning |
|--------|---------|
| `/` at start | Root directory |
| `/` between names | Path separator |
| `..` | Parent directory |
| `.` | Current directory |
| `~` | Home directory |
| `-` | Previous directory |

## Hidden Files and Directories

The special directory `..` doesn't usually show up when we run `ls`. 
To display it, add the `-a` option:

```bash
$ ls -F -a
```

```output
./  ../  exercise-data/  north-pacific-gyre/
```


## Other Hidden Files

::: {.callout-note icon="true" .nonincremental}

In addition to `..` and `.`, you may see files like `.bash_profile` or `.gitignore`.

- These files usually contain shell configuration settings
- The prefix `.` prevents them from cluttering the terminal
- Use `ls -a` to see them
- Multiple options can be combined: `ls -F -a` = `ls -Fa`

:::

## Two Types of Paths {.nonincremental}

::: {.fragment}
### Absolute Path 
- Starts with `/`
- Works from **anywhere** on the computer
- Example: `/Users/nelle/Desktop/shell-lesson-data`

:::

::: {.fragment}
### Relative Path 
- Does **not** start with `/`
- Depends on **where you are now**
- Example: `Desktop/shell-lesson-data`

:::

## Home Directory Shortcut

Use `~` to mean your home directory:

```bash
$ cd ~/Desktop
$ pwd
```

```output
/Users/nelle/Desktop
```

## Return to Home

`cd` with no arguments returns to home:

```bash
$ cd
$ pwd
```

```output
/Users/nelle
```

## Navigate Back and Forth

Go to previous directory with `-`:

```bash
$ cd -
$ pwd
```

```output
/Users/nelle/Desktop/shell-lesson-data
```

Great for switching between two locations!

## Tab Completion

**Save typing! Use Tab to auto-complete:**

Type: `ls nor` then press **Tab**

```bash
$ ls nor[TAB]
```

Becomes:

```bash
$ ls north-pacific-gyre/
```

If multiple options, press Tab twice to see all.

## General Syntax of a Shell Command

We have now encountered **commands**, **options**, and **arguments**.

Consider this example:

```bash
ls -F /
```

![](../episodes/fig/shell_command_syntax.svg){alt='General syntax of a shell command' fig-align="center" height="300"}

## Challenge

::: {.callout-note .challenge-callout icon="false" style="border-left: 4px solid #ffc107;" .nonincremental}

## Absolute vs Relative Paths

Starting from `/Users/nelle/data`,
which of the following commands could Nelle use to navigate to her home directory,
which is `/Users/nelle`?

1. `cd .`
2. `cd /`
3. `cd /home/nelle`
4. `cd ../..`
5. `cd ~`
6. `cd home`
7. `cd ~/data/..`
8. `cd`
9. `cd ..`

:::

## Solution

::: {.callout-tip .solution-callout collapse="true" icon="false" style="border-left: 4px solid #ffc107;" .nonincremental}

## Solution

1. No: `.` stands for the current directory.
2. No: `/` stands for the root directory.
3. No: Nelle's home directory is `/Users/nelle`.
4. No: this command goes up two levels, i.e. ends in `/Users`.
5. Yes: `~` stands for the user's home directory, in this case `/Users/nelle`.
6. No: this command would navigate into a directory `home` in the current directory
  if it exists.
7. Yes: unnecessarily complicated, but correct.
8. Yes: shortcut to go back to the user's home directory.
9. Yes: goes up one level.
  

:::

## Challenge

::: {.callout-note .challenge-callout icon="false" style="border-left: 4px solid #ffc107;" .nonincremental}

## Relative Path Resolution

Using the filesystem diagram below, if `pwd` displays `/Users/thing`,
what will `ls -F ../backup` display?

1. `../backup: No such file or directory`
2. `2012-12-01 2013-01-08 2013-01-27`
3. `2012-12-01/ 2013-01-08/ 2013-01-27/`
4. `original/ pnas_final/ pnas_sub/`

![](../episodes/fig/filesystem-challenge.svg){alt='A directory tree below the Users directory where "/Users" contains the directories "backup" and "thing"; "/Users/backup" contains "original","pnas\_final" and "pnas\_sub"; "/Users/thing" contains "backup"; and"/Users/thing/backup" contains "2012-12-01", "2013-01-08" and"2013-01-27"'}

:::

## Solution

::: {.callout-tip .solution-callout collapse="true" icon="false" style="border-left: 4px solid #ffc107;"}

## Solution

1. No: there *is* a directory `backup` in `/Users`.
2. No: this is the content of `Users/thing/backup`,
  but with `..`, we asked for one level further up.
3. No: see previous explanation.
4. Yes: `../backup/` refers to `/Users/backup/`.


:::

## Challenge

::: {.callout-note .challenge-callout icon="false" style="border-left: 4px solid #ffc107;" .nonincremental}

## `ls` Reading Comprehension

Using the filesystem diagram below,
if `pwd` displays `/Users/backup`,
and `-r` tells `ls` to display things in reverse order,
what command(s) will result in the following output:

```output
pnas_sub/ pnas_final/ original/
```

![](../episodes/fig/filesystem-challenge.svg){alt='A directory tree below the Users directory where "/Users" contains the directories "backup" and "thing"; "/Users/backup" contains "original","pnas\_final" and "pnas\_sub"; "/Users/thing" contains "backup"; and"/Users/thing/backup" contains "2012-12-01", "2013-01-08" and"2013-01-27"'}

1. `ls pwd`
2. `ls -r -F`
3. `ls -r -F /Users/backup`

:::

## Solution

::: {.callout-tip .solution-callout collapse="true" icon="false" style="border-left: 4px solid #ffc107;"}

## Solution

1. No: `pwd` is not the name of a directory.
2. Yes: `ls` without directory argument lists files and directories
  in the current directory.
3. Yes: uses the absolute path explicitly.
  
:::

## Nelle's Pipeline: Organizing Files

Nelle is ready to organize the files from the protein assay machine.

::: {.incremental}
- Creates directory `north-pacific-gyre` for her data
- Each sample has a unique 10-character ID (e.g., `NENE01729A`)
- Files named like `NENE01729A.txt`, `NENE01812A.txt`, etc.
- All 1520 files in the same directory
:::

## Using Tab Completion

Nelle can see her files:

```bash
$ ls north-pacific-gyre/
```

But that's a lot to type! She can use **tab completion**:

::: {.incremental}
1. Type `ls nor` and press <kbd>Tab</kbd>
2. Shell completes to `ls north-pacific-gyre/`
3. Pressing <kbd>Tab</kbd> again shows multiple files
4. Type `ls north-pacific-gyre/goo` and press <kbd>Tab</kbd> for files starting with "goo"
:::
